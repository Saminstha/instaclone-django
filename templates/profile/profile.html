{% extends 'base.html' %}

{% block content %}

<div class="card insta-card mb-4">
  <div class="card-body d-flex align-items-center">
    <img src="{{ user.profile.profile_picture.url }}"
         class="rounded-circle me-4"
         width="100" height="100">

    <div>
      <h4>{{ user.username }}</h4>

      <div class="d-flex gap-3 my-2">
        <span><strong>{{ posts_count }}</strong> posts</span>
        <span><strong>{{ followers_count }}</strong> followers</span>
        <span><strong>{{ following_count }}</strong> following</span>
      </div>

      <p class="mb-1">
        <strong>{{ user.first_name }} {{ user.last_name }}</strong>
      </p>

      <p>{{ user.profile.bio }}</p>

      <a href="{% url 'edit_profile' %}" class="btn btn-outline-dark btn-sm">
        Edit Profile
      </a>
    </div>
  </div>
</div>

<!-- Posts grid -->

<div class="row g-1">

    {% for post in posts %}
        <div class="col-4">
            <a href="{% url 'post_detail' post.id %}">
                <div style="
                    position: relative;
                    width: 100%;
                    padding-top: 100%;
                    overflow: hidden;
                ">
                    <img src="{{ post.image.url }}"
                          style="
                            position: absolute;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                          ">
                </div>
            </a>
        </div>
    {% empty %}
        <div class="col-12 text-center mt-4">
            <p class="text-muted">No posts yet.</p>
        </div>
    {% endfor %}

</div>

{% endblock %}
